title, "LHC Model created by omc3";
! Model directory: /afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt
! Natural Tune X         [     0.310]
! Natural Tune Y         [     0.320]
! Best Knowledge:        [        NO]
! Excitation             [       ADT]
! > Driven Tune X        [     0.298]
! > Driven Tune Y        [     0.330]

call, file = '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/macros/general.macros.madx';
call, file = '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/macros/lhc.macros.madx';
omc3_beam_energy = None;
exec, define_nominal_beams();

call, file = '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/macros/lhc.macros.run3.madx';
! ----- Calling Sequence and Optics -----
option, -echo;  ! suppress output from base sequence loading to keep the log small
call, file = '/afs/cern.ch/eng/acc-models/lhc/2022/lhc.seq';

call, file = '/afs/cern.ch/eng/acc-models/lhc/2022/operation/optics/R2022a_A11mC11mA10mL10m.madx'; !@modifier
call, file="knobs.madx";

exec, cycle_sequences();
use, sequence = LHCB1;
option, echo;

! ----- Matching Knobs and Output Files -----
exec, match_tunes(0.31, 0.32, 1);
exec, coupling_knob(1);
exec, do_twiss_monitors(LHCB1, '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/twiss.dat', 0.0);
exec, do_twiss_elements(LHCB1, '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/twiss_elements.dat', 0.0);
use_acd=0;
use_adt=1;
if(use_acd == 1){
exec, twiss_ac_dipole(0.31, 0.32, 0.298, 0.33, 1, '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/twiss_ac.dat', 0.0);
}else if(use_adt == 1){
exec, twiss_adt(0.31, 0.32, 0.298, 0.33, 1, '/afs/cern.ch/work/a/awegsche/public/forTuuli/omc3/tests/inputs/models/2022_inj_b1_adt/twiss_adt.dat', 0.0);
}
