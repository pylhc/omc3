

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tune Analysis &mdash; omc3 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Utils" href="../utils/index.html" />
    <link rel="prev" title="Turn-by-Turn" href="../tbt/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> omc3
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../entrypoints/index.html">Main Entrypoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../definitions/index.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../harpy/index.html">Harpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/index.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optics_measurements/index.html">Optics Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting/index.html">Plot-Subfunctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tbt/index.html">Turn-by-Turn</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tune Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-tune-analysis-constants">Module tune_analysis.constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tune-analysis-bbq-tools">Module tune_analysis.bbq_tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tune-analysis-fitting-tools">Module tune_analysis.fitting_tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tune-analysis-kickac-modifiers">Module tune_analysis.kickac_modifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tune-analysis-timber-extract">Module tune_analysis.timber_extract</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">Utils</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">omc3</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tune Analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tune_analysis/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-omc3.tune_analysis.constants">
<span id="tune-analysis"></span><h1>Tune Analysis<a class="headerlink" href="#module-omc3.tune_analysis.constants" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-tune-analysis-constants">
<h2>Module tune_analysis.constants<a class="headerlink" href="#module-tune-analysis-constants" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">module</dt>
<dd class="field-odd"><p>omc3.tune_analysis.constants</p>
</dd>
<dt class="field-even">author</dt>
<dd class="field-even"><p>jdilly</p>
</dd>
</dl>
<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_action_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_action_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_action_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_action_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the action column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_action_err_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_action_err_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_action_err_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_action_err_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the action error column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_bbq_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_bbq_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_bbq_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_bbq_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the BBQ column</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_corr_natq_err_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_corr_natq_err_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_corr_natq_err_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_corr_natq_err_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the standard deviation for the corrected natural tune.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_detuning_exponent_for_order">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_detuning_exponent_for_order</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_detuning_exponent_for_order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_detuning_exponent_for_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the default exponent for detuning orders. Highly Empirical.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_mav_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_mav_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_mav_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_mav_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the moving average BBQ column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_mav_err_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_mav_err_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_mav_err_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_mav_err_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the standard deviation of the moving average data.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_mav_window_header">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_mav_window_header</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_mav_window_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_mav_window_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Header to store the moving average window length</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_natq_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_natq_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_natq_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_natq_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the natural tune column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_natq_corr_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_natq_corr_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_natq_corr_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_natq_corr_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the corrected natural tune column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_natq_err_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_natq_err_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_natq_err_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_natq_err_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the natural tune error column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_odr_header_coeff">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_odr_header_coeff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q_plane</span></em>, <em class="sig-param"><span class="n">j_plane</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_odr_header_coeff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_odr_header_coeff" title="Permalink to this definition">¶</a></dt>
<dd><p>Header key for odr coefficient for term of given order (i.e. beta[order])</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_odr_header_coeff_corrected">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_odr_header_coeff_corrected</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q_plane</span></em>, <em class="sig-param"><span class="n">j_plane</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_odr_header_coeff_corrected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_odr_header_coeff_corrected" title="Permalink to this definition">¶</a></dt>
<dd><p>Header key for corrected odr coefficient for term of given order (i.e. beta[order])</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_odr_header_err_coeff">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_odr_header_err_coeff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q_plane</span></em>, <em class="sig-param"><span class="n">j_plane</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_odr_header_err_coeff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_odr_header_err_coeff" title="Permalink to this definition">¶</a></dt>
<dd><p>Header key for odr coefficient standard deviation for term of given order (i.e. sd_beta[order])</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_odr_header_err_coeff_corrected">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_odr_header_err_coeff_corrected</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q_plane</span></em>, <em class="sig-param"><span class="n">j_plane</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_odr_header_err_coeff_corrected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_odr_header_err_coeff_corrected" title="Permalink to this definition">¶</a></dt>
<dd><p>Header key for corrected odr coefficient standard deviation for term of given order (i.e. sd_beta[order])</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_paired_lables">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_paired_lables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tune_plane</span></em>, <em class="sig-param"><span class="n">action_plane</span></em>, <em class="sig-param"><span class="n">tune_scale</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_paired_lables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_paired_lables" title="Permalink to this definition">¶</a></dt>
<dd><p>Labels for the action/tune plots.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_tend_head">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_tend_head</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_tend_head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_tend_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for fill end time from header.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_timber_bbq_key">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_timber_bbq_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em>, <em class="sig-param"><span class="n">beam</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_timber_bbq_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_timber_bbq_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Key to extract bbq from timber.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_time_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_time_col</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_time_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_time_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the TIME column.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_tstart_head">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_tstart_head</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_tstart_head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_tstart_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for fill start time from header.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.constants.get_used_in_mav_col">
<code class="sig-prename descclassname">omc3.tune_analysis.constants.</code><code class="sig-name descname">get_used_in_mav_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plane</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/constants.html#get_used_in_mav_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.constants.get_used_in_mav_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Label for the column showing if BBQ value was used in moving average.</p>
</dd></dl>

</div>
<span class="target" id="module-omc3.tune_analysis.bbq_tools"></span><div class="section" id="module-tune-analysis-bbq-tools">
<h2>Module tune_analysis.bbq_tools<a class="headerlink" href="#module-tune-analysis-bbq-tools" title="Permalink to this headline">¶</a></h2>
<p>Tools to handle BBQ data.</p>
<dl class="field-list simple">
<dt class="field-odd">module</dt>
<dd class="field-odd"><p>omc3.tune_analysis.bbq_tools</p>
</dd>
<dt class="field-even">author</dt>
<dd class="field-even"><p>jdilly</p>
</dd>
</dl>
<dl class="py function">
<dt id="omc3.tune_analysis.bbq_tools.clean_outliers_moving_average">
<code class="sig-prename descclassname">omc3.tune_analysis.bbq_tools.</code><code class="sig-name descname">clean_outliers_moving_average</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_series</span></em>, <em class="sig-param"><span class="n">length</span></em>, <em class="sig-param"><span class="n">limit</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/bbq_tools.html#clean_outliers_moving_average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.bbq_tools.clean_outliers_moving_average" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a moving average of the <code class="docutils literal notranslate"><span class="pre">data_series</span></code> over <code class="docutils literal notranslate"><span class="pre">length</span></code> entries,
by means of <a class="reference internal" href="../utils/index.html#omc3.utils.outliers.get_filter_mask" title="omc3.utils.outliers.get_filter_mask"><code class="xref py py-func docutils literal notranslate"><span class="pre">outlier</span> <span class="pre">filter</span></code></a>.
The values are shifted, so that the averaged value takes ceil((length-1)/2) values previous
and floor((length-1)/2) following values into account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_series</strong> -- Series of data</p></li>
<li><p><strong>length</strong> -- length of the averaging window</p></li>
<li><p><strong>limit</strong> -- points beyond that limit are always filtered</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.bbq_tools.get_moving_average">
<code class="sig-prename descclassname">omc3.tune_analysis.bbq_tools.</code><code class="sig-name descname">get_moving_average</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_series</span></em>, <em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">min_val</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_val</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fine_length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fine_cut</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/bbq_tools.html#get_moving_average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.bbq_tools.get_moving_average" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a moving average of the <code class="docutils literal notranslate"><span class="pre">data_series</span></code> over <code class="docutils literal notranslate"><span class="pre">length</span></code> entries.
The data can be filtered beforehand.
The values are shifted, so that the averaged value takes ceil((length-1)/2) values previous
and floor((length-1)/2) following values into account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_series</strong> -- Series of data</p></li>
<li><p><strong>length</strong> -- length of the averaging window</p></li>
<li><p><strong>min_val</strong> -- minimum value (for filtering)</p></li>
<li><p><strong>max_val</strong> -- maximum value (for filtering)</p></li>
<li><p><strong>fine_length</strong> -- length of the averaging window for fine cleaning</p></li>
<li><p><strong>fine_cut</strong> -- allowed deviation for fine cleaning</p></li>
</ul>
</dd>
</dl>
<p>Returns: filtered and averaged Series and the mask used for filtering data.</p>
</dd></dl>

</div>
<span class="target" id="module-omc3.tune_analysis.fitting_tools"></span><div class="section" id="module-tune-analysis-fitting-tools">
<h2>Module tune_analysis.fitting_tools<a class="headerlink" href="#module-tune-analysis-fitting-tools" title="Permalink to this headline">¶</a></h2>
<p>Tools for fitting functions, mainly via odr.</p>
<dl class="simple">
<dt>Important Convention:</dt><dd><p>The beta-parameter in the ODR models go upwards with order, i.e.
|  beta[0] = y-Axis offset
|  beta[1] = slope
|  beta[2] = quadratic term
|  etc.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">module</dt>
<dd class="field-odd"><p>omc3.tune_analysis.fitting_tools</p>
</dd>
<dt class="field-even">author</dt>
<dd class="field-even"><p>jdilly</p>
</dd>
</dl>
<dl class="py function">
<dt id="omc3.tune_analysis.fitting_tools.do_odr">
<code class="sig-prename descclassname">omc3.tune_analysis.fitting_tools.</code><code class="sig-name descname">do_odr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">xerr</span></em>, <em class="sig-param"><span class="n">yerr</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/fitting_tools.html#do_odr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.fitting_tools.do_odr" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odr fit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> -- Series of x data</p></li>
<li><p><strong>y</strong> -- Series of y data</p></li>
<li><p><strong>xerr</strong> -- Series of x data errors</p></li>
<li><p><strong>yerr</strong> -- Series of y data errors</p></li>
<li><p><strong>order</strong> -- fit order; 1: linear, 2: quadratic</p></li>
</ul>
</dd>
</dl>
<p>Returns: Odr fit. Betas order is index = coefficient of same order.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.fitting_tools.get_poly_fun">
<code class="sig-prename descclassname">omc3.tune_analysis.fitting_tools.</code><code class="sig-name descname">get_poly_fun</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/fitting_tools.html#get_poly_fun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.fitting_tools.get_poly_fun" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the function of polynomial order. (is this pythonic enough?)</p>
</dd></dl>

</div>
<span class="target" id="module-omc3.tune_analysis.kick_file_modifiers"></span><div class="section" id="module-tune-analysis-kickac-modifiers">
<h2>Module tune_analysis.kickac_modifiers<a class="headerlink" href="#module-tune-analysis-kickac-modifiers" title="Permalink to this headline">¶</a></h2>
<p>Functions to add data to or extract data from kick_ac files.</p>
<dl class="field-list simple">
<dt class="field-odd">module</dt>
<dd class="field-odd"><p>omc3.tune_analysis.kick_file_modifiers</p>
</dd>
<dt class="field-even">author</dt>
<dd class="field-even"><p>jdilly</p>
</dd>
</dl>
<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.add_bbq_data">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">add_bbq_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kick_df</span></em>, <em class="sig-param"><span class="n">bbq_series</span></em>, <em class="sig-param"><span class="n">column</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#add_bbq_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.add_bbq_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add bbq values from series to kickac dataframe into column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kick_df</strong> -- kick dataframe (needs to have time as index, best load it with <cite>read_timed_dataframe()</cite>)</p></li>
<li><p><strong>bbq_series</strong> -- series of bbq data with time as index</p></li>
<li><p><strong>column</strong> -- column name to add the data into</p></li>
</ul>
</dd>
</dl>
<p>Returns: modified kick dataframe</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.add_corrected_natural_tunes">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">add_corrected_natural_tunes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kickac_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#add_corrected_natural_tunes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.add_corrected_natural_tunes" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the corrected natural tunes to kickac</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kickac_df</strong> -- Dataframe containing the data</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modified kick_ac</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.add_moving_average">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">add_moving_average</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kickac_df</span></em>, <em class="sig-param"><span class="n">bbq_df</span></em>, <em class="sig-param"><span class="n">filter_args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#add_moving_average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.add_moving_average" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the moving average of the bbq data to kickac_df and bbq_df.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.add_odr">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">add_odr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kickac_df</span></em>, <em class="sig-param"><span class="n">odr_fit</span></em>, <em class="sig-param"><span class="n">action_plane</span></em>, <em class="sig-param"><span class="n">tune_plane</span></em>, <em class="sig-param"><span class="n">corrected</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#add_odr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.add_odr" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the odr fit of the (un)corrected data to the header of the kickac.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kickac_df</strong> -- Dataframe containing the data</p></li>
<li><p><strong>odr_fit</strong> -- odr-fit data (definitions see <code class="docutils literal notranslate"><span class="pre">detuning_tools.py</span></code>)</p></li>
<li><p><strong>action_plane</strong> -- Plane of the action</p></li>
<li><p><strong>tune_plane</strong> -- Plane of the tune</p></li>
<li><p><strong>corrected</strong> -- (BBQ) corrected data or uncorrected fit?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modified kick_ac</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.add_total_natq_std">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">add_total_natq_std</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kickac_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#add_total_natq_std"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.add_total_natq_std" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the total standard deviation of the natural tune to the kickac.
The total standard deviation is here defined as the standard deviation of the measurement
plus the standard deviation of the moving average.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kickac_df</strong> -- Dataframe containing the data</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modified kick_ac</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.get_ampdet_data">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">get_ampdet_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kickac_df</span></em>, <em class="sig-param"><span class="n">action_plane</span></em>, <em class="sig-param"><span class="n">tune_plane</span></em>, <em class="sig-param"><span class="n">corrected</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#get_ampdet_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.get_ampdet_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the data needed for the (un)corrected amplitude detuning
from the kickac dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kickac_df</strong> -- Dataframe containing the data</p></li>
<li><p><strong>action_plane</strong> -- Plane of the action</p></li>
<li><p><strong>tune_plane</strong> -- Plane of the tune</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe containing action, tune, action_err and tune_err</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.kick_file_modifiers.get_odr_data">
<code class="sig-prename descclassname">omc3.tune_analysis.kick_file_modifiers.</code><code class="sig-name descname">get_odr_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kickac_df</span></em>, <em class="sig-param"><span class="n">action_plane</span></em>, <em class="sig-param"><span class="n">tune_plane</span></em>, <em class="sig-param"><span class="n">order</span></em>, <em class="sig-param"><span class="n">corrected</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/kick_file_modifiers.html#get_odr_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.kick_file_modifiers.get_odr_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the data from kickac.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kickac_df</strong> -- Dataframe containing the data</p></li>
<li><p><strong>action_plane</strong> -- Plane of the action</p></li>
<li><p><strong>tune_plane</strong> -- Plane of the tune</p></li>
<li><p><strong>order</strong> -- Order of the odr fit</p></li>
<li><p><strong>corrected</strong> -- (BBQ) corrected data or uncorrected fit?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary containing fit data from odr</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-omc3.tune_analysis.timber_extract"></span><div class="section" id="module-tune-analysis-timber-extract">
<h2>Module tune_analysis.timber_extract<a class="headerlink" href="#module-tune-analysis-timber-extract" title="Permalink to this headline">¶</a></h2>
<p>Tools to extract data from timber.</p>
<p>It is a bit heavy on the LHC-side at the moment.
Feel free to make it more accelerator independent.</p>
<dl class="field-list simple">
<dt class="field-odd">module</dt>
<dd class="field-odd"><p>omc3.tune_analysis.timber_extract</p>
</dd>
<dt class="field-even">author</dt>
<dd class="field-even"><p>jdilly</p>
</dd>
</dl>
<dl class="py function">
<dt id="omc3.tune_analysis.timber_extract.extract_between_times">
<code class="sig-prename descclassname">omc3.tune_analysis.timber_extract.</code><code class="sig-name descname">extract_between_times</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t_start</span></em>, <em class="sig-param"><span class="n">t_end</span></em>, <em class="sig-param"><span class="n">keys</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">names</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/timber_extract.html#extract_between_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.timber_extract.extract_between_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts data for keys between t_start and t_end from timber.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t_start</strong> -- starting time in local time or timestamp</p></li>
<li><p><strong>t_end</strong> -- end time in local time or timestamp</p></li>
<li><p><strong>keys</strong> -- list of data to extract</p></li>
<li><p><strong>names</strong> -- dict to map keys to column names</p></li>
</ul>
</dd>
</dl>
<p>Returns: tfs pandas dataframe.</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.timber_extract.get_fill_times">
<code class="sig-prename descclassname">omc3.tune_analysis.timber_extract.</code><code class="sig-name descname">get_fill_times</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span></em>, <em class="sig-param"><span class="n">fill_number</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/timber_extract.html#get_fill_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.timber_extract.get_fill_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns start and end time of fill with fill number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db</strong> -- pytimber database</p></li>
<li><p><strong>fill_number</strong> -- fill number</p></li>
</ul>
</dd>
</dl>
<p>Returns: tuple of start and end time</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.timber_extract.get_tune_and_coupling_variables">
<code class="sig-prename descclassname">omc3.tune_analysis.timber_extract.</code><code class="sig-name descname">get_tune_and_coupling_variables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/timber_extract.html#get_tune_and_coupling_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.timber_extract.get_tune_and_coupling_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the tune and coupling variable names.
:param db: pytimber database</p>
<p>Returns: list of variable names</p>
</dd></dl>

<dl class="py function">
<dt id="omc3.tune_analysis.timber_extract.lhc_fill_to_tfs">
<code class="sig-prename descclassname">omc3.tune_analysis.timber_extract.</code><code class="sig-name descname">lhc_fill_to_tfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fill_number</span></em>, <em class="sig-param"><span class="n">keys</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">names</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omc3/tune_analysis/timber_extract.html#lhc_fill_to_tfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#omc3.tune_analysis.timber_extract.lhc_fill_to_tfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts data for keys of fill from timber.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fill_number</strong> -- fill number</p></li>
<li><p><strong>keys</strong> -- list of data to extract</p></li>
<li><p><strong>names</strong> -- dict to map keys to column names</p></li>
</ul>
</dd>
</dl>
<p>Returns: tfs pandas dataframe.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../utils/index.html" class="btn btn-neutral float-right" title="Utils" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tbt/index.html" class="btn btn-neutral float-left" title="Turn-by-Turn" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>